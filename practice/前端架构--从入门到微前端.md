<!-- MarkdownTOC -->

- [前端架构--从入门到微前端](#%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84--%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%BE%AE%E5%89%8D%E7%AB%AF)
	- [miraculous sentences](#miraculous-sentences)
	- [What's Software Architecture?](#whats-software-architecture)
	- [Architecture Mode](#architecture-mode)
	- [Frontend Architecture](#frontend-architecture)
		- [Layer](#layer)

<!-- /MarkdownTOC -->


# 前端架构--从入门到微前端


## miraculous sentences

没有一种架构能满足未来的需求。

## What's Software Architecture?

> 架构是指体现在它的组件中的一个系统的基本组织、组织之间的关系、组织和环境的关系及指导其设计和发展的原则

以 lego 为例：
- 一个 lego 内包含实现最终完成体的所有物料
- 多个物料可以组合成一个模块
- 这个时候，说明书扮演着类似架构的角色，它说明了**物料**、**物料组织方式**、**预期效果**、**注意事项**
- 软件架构相对于说明书，它需要考虑当前环境的因素，需要一定的前瞻性，同时需要规定新模块的接入规范；同时它也有一定的局限性，它无法准确预计架构不再适用的标准和准确时间点

了解架构的基本原则之后，我们需要思考：架构从何而来？或者说，架构用来解决什么问题？

很重要的一点是，**脱离技术的角度去看待问题**，之前杨老师也经常跟我强调这点，随着开发经验的丰富，对这句话有了一定的理解

- 架构的落地是一个多方博弈的产物，因此，需要了解各方的利益和需求
- 寻找架构的特点（可以吹的点，业界有没有？为什么我的比他的好？）
- 关注点和优先级
- 跨功能需求
- 技术风险点

关注点和优先级，优先级往往不是绝对的，会根据具体项目来动态平衡

|key|value|
|:-|:-|
|性能|渲染，QPS|
|安全|数据安全，应对攻击的能力|
|平台化|承载其他系统的能力|
|代码维护|code review，快速上手，快速迭代|
|用户体验|简单，优雅|

**注意**: 作为一个程序员，要坚持以数据来说服人--提供不同浏览器、系统的占比，或者提供支持向下兼容的成本估算--真实的估算

## Architecture Mode

架构风格是架构模式的表现形式，代码架构是架构风格的一个具体表现

- 分层风格，将系统按照水平切分的方式分成多个层，一个系统由多层组成，一层由多个模块组成，例如OSI七层模型和TCP/IP五层模型
- MVC，经典模型，由 View 和 Controller 共同完成用户界面的功能，设计一套变更机制，保证用户界面和模型的一致性
- 发布-订阅，基于事件，完成发布者和订阅者的交互
- 管理和过滤器，还比较陌生，这是一种适用于处理数据流的架构模式，它封装每个步骤到一个过滤器组件内，数据通过相邻过滤器之间的管道传输

一个架构，其产出或者说基本资源需要（部分内容对团队建设也有帮助）：

- 架构图
- 迭代计划
- 技术栈及选型
- 示例代码
- 测试策略
- 部署方式及持续集成策略
- 团队协作，GIT 提交策略

这里深入一点，架构设计最理想的是20%的计划式设计和80%的演化式设计，在计划式设计阶段，我们需要：

- 基础建设，确保架构能够处理的最大风险
- 前后端分离架构的基本规范，JSON 数据格式，RESTful API 规范；后台语言，数据库等；前端组织、UI框架等

## Frontend Architecture

前端架构的发展史，几个关键点

- 2005 年之前，主要还是后端渲染出 HTML（比如 JSP）,通过 JavaScript 做一些简单的动效
- 2005 年，**Google** 在其大多应用中使用异步通信技术，开启了 WEB 前端的新时代，这意味着，UI 和 Model 层的解耦，在这之后的很长一段时间内，JQuery 大发异彩，也启发了很多开发思想，比如动态渲染模版
- NodeJs 的出现再次为前端注入了新的活力，前端开始工程化，比如构建工具，包管理，模版管理等等，单页面应用的流行，诞生了两个优秀开源框架 React、Vue，同时也丰富了前端生态

随着前端项目的复杂，组件化和 MV\* 的方式已经渐渐发力，于是，微前端提供了一种解决问题新的思路，它被设计用来解决：

- 跨框架，在一个页面上，可以允许运行多个前端框架
- 应用拆分，将一个应用拆解为多个微小的应用，类似微服务
- 遗留系统迁移，兼容旧的前端框架

下面的主要内容，也是围绕这些问题来展开和思考🤔


### Layer

架构设计可以分为4⃣️个层级，每个层级有自己的关注点和规则，由上而下：

- 系统级，**前后端分离架构**、微前端架构，规定了应用在系统内的关系、前后端数据交换、系统集成等
- 应用级，规定应用外部的整体架构，组件共享，应用通信等
- 模块级，应用内部的模块架构，比如路由、状态管理等模块化
- 代码级，代码规范、原则、质量

**自上而下设计，自下而上完善**

前后端分离，不仅仅是指代码分离，它是一种技术决策，比如用户鉴权、API 接口管理和设计、API 文档管理、BBF、Mock Server






