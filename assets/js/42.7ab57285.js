(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{300:function(t,a,s){"use strict";s.r(a);var e=s(38),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux","aria-hidden":"true"}},[t._v("#")]),t._v(" Redux")]),t._v(" "),s("blockquote",[s("p",[t._v("记录 redux 的学习和在项目内的使用")])]),t._v(" "),s("h2",{attrs:{id:"basic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic","aria-hidden":"true"}},[t._v("#")]),t._v(" Basic")]),t._v(" "),s("p",[t._v("Redux 不局限于使用，它可以在任何框架内使用，它的出现主要是为了解决"),s("strong",[t._v("多交互，多数据源下的代码结构和组件通信")])]),t._v(" "),s("p",[t._v("从组件角度看:")]),t._v(" "),s("ul",[s("li",[t._v("某个组件的状态，需要共享")]),t._v(" "),s("li",[t._v("某个状态需要在任何地方能够拿到，即一个全局状态")]),t._v(" "),s("li",[t._v("一个组件可以改变全局状态")]),t._v(" "),s("li",[t._v("一个组件需要改变另一个组件的状态")])]),t._v(" "),s("p",[t._v("之前用 react 的 props 来实现通信，父组件向子组件通信方便，但是兄弟组件和子组件向父组件通信的话，前者需要提升状态至其公共父组件，后者需要声明一些额外的函数，不是很优雅")]),t._v(" "),s("p",[t._v("Redux 的设计思路：")]),t._v(" "),s("ol",[s("li",[t._v("Web 应用就是一个状态机，视图和状态一一对应")]),t._v(" "),s("li",[t._v("所有的状态都保存在一个对象内")])]),t._v(" "),s("h3",{attrs:{id:"store"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store","aria-hidden":"true"}},[t._v("#")]),t._v(" Store")]),t._v(" "),s("p",[t._v("可以看成一个容器，用来保存数据，整个应用只能有一个 Store，它通过 "),s("code",[t._v("createStore()")]),t._v(" 方法进行创建，它可以接受的参数：")]),t._v(" "),s("ul",[s("li",[t._v("Reducer")]),t._v(" "),s("li",[t._v("defaultState")]),t._v(" "),s("li",[t._v("applyMiddleware()")])]),t._v(" "),s("p",[t._v("Store 的职责：")]),t._v(" "),s("ol",[s("li",[t._v("维持应用的 state")]),t._v(" "),s("li",[t._v("提供 "),s("code",[t._v("Store.getState()")]),t._v(" 来获取 state")]),t._v(" "),s("li",[t._v("提供 "),s("code",[t._v("Store.dispatch(action)")]),t._v(" 来通知 reducer 根据 action 更新 state，是 View 发出 Action 的唯一方式")]),t._v(" "),s("li",[t._v("通过 "),s("code",[t._v("subscribe(listener)")]),t._v(" 来注册监听器和通过其返回函数销毁监听器，表示一旦 state 发生变化，立即调用监听函数，在 React 项目中，只要把 "),s("code",[t._v("render()")]),t._v(" 或者 "),s("code",[t._v("setState()")]),t._v(" 方法放入监听函数中，就可以实现 View 的自动渲染")])]),t._v(" "),s("h3",{attrs:{id:"state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state","aria-hidden":"true"}},[t._v("#")]),t._v(" State")]),t._v(" "),s("blockquote",[s("p",[t._v('"建议你尽可能地把 state 范式化，不存在嵌套。把所有数据放到一个对象里，每个数据以 ID 为主键，不同实体或列表间通过 ID 相互引用数据"')])]),t._v(" "),s("p",[t._v("State 可以看作是对 Store 对象内某个时间点的数据的一次快照，一个应用只有一个 Store，只要 state 相同则可以判定其视图相同")]),t._v(" "),s("h3",{attrs:{id:"action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#action","aria-hidden":"true"}},[t._v("#")]),t._v(" Action")]),t._v(" "),s("p",[s("strong",[t._v("Action仅仅用来描述有事情发生这一事实，并不会更新 state")])]),t._v(" "),s("p",[t._v("一般来说，用户接触不到 Store，自然也无法改变它，用户接触到的是视图，所以改变 Store 内 state 是用户通过视图发起的，而这个过程的媒介就是 Action")]),t._v(" "),s("p",[t._v("Action 就是 View 发起的通知，来通知 state 需要变化")]),t._v(" "),s("p",[t._v("Action 是一个对象，"),s("code",[t._v("type")]),t._v(" 属性为必需属性，用来表示 Action 名字")]),t._v(" "),s("p",[t._v("只有两个对象完全相同时，则两个 Action 才相等，否则为独立的 Action，因此随着传递信息的不同，会产生很多个 Action，这时需要封装一个函数来作为 Action Creater(即 Action 生成器，用来简化代码结构)")]),t._v(" "),s("h3",{attrs:{id:"reducer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reducer","aria-hidden":"true"}},[t._v("#")]),t._v(" Reducer")]),t._v(" "),s("p",[t._v("Store 收到一个新的 Action 后，通过 Reducer 进行相应的计算，返回一个新的 state")]),t._v(" "),s("p",[t._v("Reducer 可以简单表示为 "),s("code",[t._v("Reducer(currentState, action) -> newState")]),t._v("，它是一个纯函数(即输入相同，则输出一定相同)，接受 Action 和 当前 State 作为参数，返回一个新的 State")]),t._v(" "),s("p",[t._v("在实际应用中，Reducer 不用手动调用，在生成 Store 实例时，将其作为参数传入，之后每当 "),s("code",[t._v("store.dispatch(action)")]),t._v(" 传递来一个新的 action 时，就会自动调用 Reducer")]),t._v(" "),s("p",[s("strong",[t._v("reducer 一定要保持纯净，可以理解为：只要传入参数相同，返回计算得到的下一个 state 就一定相同，没有特殊情况、没有副作用、没有 API 请求、没有变量修改，单纯执行计算")])]),t._v(" "),s("p",[t._v("因此，在 reducer 一定不可以：")]),t._v(" "),s("ol",[s("li",[t._v("修改传入参数 state，可以利用 "),s("code",[t._v("Object.assign({}, state)")]),t._v(" 来进行拷贝，也可以使用展开运算符进行拷贝")]),t._v(" "),s("li",[t._v("执行有副作用的操作，比如 API请求和路由跳转")]),t._v(" "),s("li",[t._v("调用非纯函数，比如 "),s("code",[t._v("Date.now()")]),t._v("，"),s("code",[t._v("Math.random()")]),t._v(" 等")]),t._v(" "),s("li",[t._v("一定要返回 state，如果遇到未知的 action，可以直接返回旧的 state")])]),t._v(" "),s("h3",{attrs:{id:"redux-work-flow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux-work-flow","aria-hidden":"true"}},[t._v("#")]),t._v(" Redux Work Flow")]),t._v(" "),s("p",[t._v("了解以上几点概念之后，可以对 redux 的工作流程做一个梳理：")]),t._v(" "),s("ol",[s("li",[t._v("用户在 React Components 通过视图层发出 Action，即 "),s("code",[t._v("dispatch(action)")])]),t._v(" "),s("li",[t._v("Store 接受到 Action 之后调用 Reducer，向其传递 state 和 action 参数，并且接收 Reducer 返回的新 State")]),t._v(" "),s("li",[t._v("State 一旦发生变化，就会调用 "),s("code",[t._v("subscribe(listener)")]),t._v(" 监听函数，listener 通过 "),s("code",[t._v("getState()")]),t._v(" 获得当前的 State，再利用 React 的 setState() 来重新渲染")])]),t._v(" "),s("h3",{attrs:{id:"middleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#middleware","aria-hidden":"true"}},[t._v("#")]),t._v(" Middleware")]),t._v(" "),s("p",[t._v("中间件就是一个函数，对 "),s("code",[t._v("store.dispatch(action)")]),t._v(" 进行改造，在发出 Action 和执行 Reducer 之间，添加其他功能")]),t._v(" "),s("p",[t._v("在 Redux 中，在创建 Store 时，通过传递 "),s("code",[t._v("applyMiddleware(middleware1,...)")]),t._v(" 参数来引入中间件")]),t._v(" "),s("p",[t._v("注意：中间件的引入也需要注意顺序")]),t._v(" "),s("h2",{attrs:{id:"react-redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-redux","aria-hidden":"true"}},[t._v("#")]),t._v(" React-Redux")]),t._v(" "),s("h3",{attrs:{id:"store-传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-传递","aria-hidden":"true"}},[t._v("#")]),t._v(" Store 传递")]),t._v(" "),s("p",[t._v("要使每个组件都能够获取到 Store")]),t._v(" "),s("ol",[s("li",[t._v("第一种办法，将 store 作为 props 属性传递到每一个被 "),s("code",[t._v("connect()")]),t._v(" 包装的组件内")]),t._v(" "),s("li",[t._v("更加推荐的做法，是通过 "),s("code",[t._v("<Provider store={store}>")]),t._v(" 组件来包裹根组件")])]),t._v(" "),s("p",[t._v("方法2的原理是将 Store 挂载到 React 组件的 context 属性上，所以可以通过 "),s("code",[t._v("const { store } = this.context")]),t._v(" 来获取 store 对象")]),t._v(" "),s("h3",{attrs:{id:"connect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connect","aria-hidden":"true"}},[t._v("#")]),t._v(" Connect")]),t._v(" "),s("p",[s("code",[t._v("Connect()")]),t._v(" 用来连接 React 组件和 Redux Store，连接操作不会更改原来组件，返回值为一个新的与 Redux Store 连接的组件类")]),t._v(" "),s("p",[t._v("作用是将视图组件转换为容器组件，作为容器组件，其需要定义输入和输出：")]),t._v(" "),s("ol",[s("li",[t._v("输入逻辑：外部数据（即 state 对象）如何转换为视图组件的参数")]),t._v(" "),s("li",[t._v("输出逻辑：用户动作如何转变为 Action，从视图组件传出")])]),t._v(" "),s("h4",{attrs:{id:"mapstatetoprops"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapstatetoprops","aria-hidden":"true"}},[t._v("#")]),t._v(" mapStateToProps")]),t._v(" "),s("p",[t._v("mapStateToProps 参数负责输入逻辑，本质是一个函数，输入为 state，输出为 state 对象到当前组件 props 对象的映射关系，返回值是一个对象，每一个键值对都表示一组映射")]),t._v(" "),s("p",[t._v("mapStateToProps 第一个形参一定是 state，但是其还可以接受 "),s("code",[t._v("ownProps")]),t._v("，其代表容器组件的 props 对象，使用 ownprops 作为参数后，如果容器组件的参数发生变化时，也会引发 视图组件的重新渲染")]),t._v(" "),s("p",[t._v("mapStateToProps 不是必需的，如果不传，则表示 Store 的更新不会引起当前视图组件的更新")]),t._v(" "),s("h4",{attrs:{id:"mapdispatchtoprops"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapdispatchtoprops","aria-hidden":"true"}},[t._v("#")]),t._v(" mapDispatchToProps")]),t._v(" "),s("p",[t._v("mapDispatchToProps 负责输出逻辑，用来建立视图组件参数到 "),s("code",[t._v("store.dispatch()")]),t._v(" 方法的映射，它可以是一个函数，也可以是一个对象")]),t._v(" "),s("p",[t._v("作为函数，接受 "),s("code",[t._v("dispatch")]),t._v(" 和 "),s("code",[t._v("ownProps")]),t._v(" 作为形参，返回值是一个对象，每个键值对都是一个映射，定义视图组件的参数怎样发出 Action")]),t._v(" "),s("p",[t._v("更多的用法是作为对象，其键名（比如 xxx）对应视图组件的同名属性名（对应 "),s("code",[t._v("this.props.xxx")]),t._v("），其键值为一个 Action Creator，是一个函数")]),t._v(" "),s("h3",{attrs:{id:"instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance","aria-hidden":"true"}},[t._v("#")]),t._v(" Instance")]),t._v(" "),s("p",[s("code",[t._v("store.js")]),t._v("，用来生成 store 实例，添加中间件和集成 reducer")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("createStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" combineReducers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" applyMiddleware"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" thunk "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux-thunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" dashBoard "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/store/dashBoard/reducer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("combineReducers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("dashBoard"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[s("code",[t._v("actionType.js")]),t._v("，用来规定一些 types")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dailyCharts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DAILYCHARTS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("dailyCharts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("code",[t._v("dashBoard/reducer.js")]),t._v("，DashBoard 模块的 reducer，用来根据action，返回新的 state")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Type "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./actionType'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" defaultState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dailyList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    sumMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("dashBoardData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" defaultState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dailyCharts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                dailyList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dailyList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                sumMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sumMap\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("p",[s("code",[t._v("dashBoard/action.js")]),t._v("，action genertor，action 生成器，用来返回 action")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" Type "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/store/dashBoard/actionType'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("changeChart")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dailyList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sumMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dailyCharts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        dailyList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        sumMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" changeChart "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("code",[t._v("dailyView.jsx")]),t._v("，state 在组件内的使用")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" connect "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" changeChart "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../store/dashBoard/action'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// statements")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dashBoardData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dashBoardData\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    changeChart\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DailyView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])])])},[],!1,null,null,null);a.default=n.exports}}]);