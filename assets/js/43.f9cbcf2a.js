(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{292:function(e,t,o){"use strict";o.r(t);var a=o(38),r=Object(a.a)({},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"matters"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#matters","aria-hidden":"true"}},[e._v("#")]),e._v(" Matters")]),e._v(" "),o("blockquote",[o("p",[e._v("用来记录在使用Swift4进行实际开发过程中遇到的具有代表性或者棘手的问题")])]),e._v(" "),o("h2",{attrs:{id:"could-not-locate-device-support-files"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#could-not-locate-device-support-files","aria-hidden":"true"}},[e._v("#")]),e._v(" Could not locate device support files")]),e._v(" "),o("p",[e._v("由于手机 ios 升级到13之后，现在版本的Xcode缺少相应的文件，导致无法在真机上进行测试，解决办法：")]),e._v(" "),o("ol",[o("li",[e._v("直接更新 Xcode，时间长，另外通过网盘来安装 Xcode 会出现很多问题，所以一般忽略这种办法；")]),e._v(" "),o("li",[e._v("将相应的 SDK 文件导入，在应用程序内找到Xcode，右键“显示包内容”，根据路径 "),o("code",[e._v("Contents--\x3eDeveloper--\x3ePlatforms--\x3eiPhoneOS.platform--\x3eDeviceSupport")]),e._v("，将相应的包复制进去之后重启Xcode")]),e._v(" "),o("li",[e._v("在"),o("a",{attrs:{href:"https://developer.apple.com/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("开发者官网"),o("OutboundLink")],1),e._v(" 下载更新的 Xcode beta，一般 Xcode 会和新版iOS一起发布")])]),e._v(" "),o("h2",{attrs:{id:"nsinvalidunarchiveoperationexception"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#nsinvalidunarchiveoperationexception","aria-hidden":"true"}},[e._v("#")]),e._v(" NSInvalidUnarchiveOperationException")]),e._v(" "),o("p",[e._v("问题描述：因为测试环境和线上环境的不同，通过更改项目名来进行区别，在升级 Xcode11 之后，app 启动直接 crash，报错 "),o("code",[e._v("'NSInvalidUnarchiveOperationException', reason: '*** -[NSKeyedUnarchiver decodeObjectForKey:]: cannot decode object of class (xxx.class) for key (root);")])]),e._v(" "),o("p",[e._v("参考文章"),o("a",{attrs:{href:"https://juejin.im/post/5c1ba593e51d4546c014dd7d",target:"_blank",rel:"noopener noreferrer"}},[e._v("Swift环境下变更Xcode工程名后使用NSKeyedUnarchiver解档引起的崩溃问题"),o("OutboundLink")],1),e._v("中，问题出现的原因：")]),e._v(" "),o("p",[e._v("由于 Swift 的"),o("strong",[e._v("命名空间")]),e._v("机制，创建的类都会带上命名空间（简单理解就是工程名），当改变工程名的同时，意味着命名空间也发生了相应的改变。在上一个package内工程归档自定义类时，使用的是旧的命名空间，因此在新的package内发生解档时，找不到对应的命名空间，导致 crash")]),e._v(" "),o("p",[e._v("除了通过文章的 "),o("code",[e._v("try catch")]),e._v(" 来捕获错误之外，还需要检查项目内的相关配置是否与之前打包持久化的内容一致，具体如下：")]),e._v(" "),o("ol",[o("li",[o("code",[e._v("Info.plist > Bundle Display Name")])]),e._v(" "),o("li",[o("code",[e._v("Build Setting > Product Name")])])])])},[],!1,null,null,null);t.default=r.exports}}]);