<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | LoreFlows</title>
    <meta name="description" content="Welcome To The Knowledge Palace!">
    <link rel="icon" href="logo.ico">
    
    <link rel="preload" href="/BlogFlows/assets/css/0.styles.481dacda.css" as="style"><link rel="preload" href="/BlogFlows/assets/js/app.40814e45.js" as="script"><link rel="preload" href="/BlogFlows/assets/js/2.f4cb1acf.js" as="script"><link rel="preload" href="/BlogFlows/assets/js/32.5ae5f7fc.js" as="script"><link rel="prefetch" href="/BlogFlows/assets/js/10.ef3b0305.js"><link rel="prefetch" href="/BlogFlows/assets/js/11.38947e9d.js"><link rel="prefetch" href="/BlogFlows/assets/js/12.8b23f1ea.js"><link rel="prefetch" href="/BlogFlows/assets/js/13.24ed00e3.js"><link rel="prefetch" href="/BlogFlows/assets/js/14.aae22bb5.js"><link rel="prefetch" href="/BlogFlows/assets/js/15.3b0cf42b.js"><link rel="prefetch" href="/BlogFlows/assets/js/16.8678c867.js"><link rel="prefetch" href="/BlogFlows/assets/js/17.bdfeb8b8.js"><link rel="prefetch" href="/BlogFlows/assets/js/18.ef671b42.js"><link rel="prefetch" href="/BlogFlows/assets/js/19.f00581ec.js"><link rel="prefetch" href="/BlogFlows/assets/js/20.2ba75e59.js"><link rel="prefetch" href="/BlogFlows/assets/js/21.66731536.js"><link rel="prefetch" href="/BlogFlows/assets/js/22.98d195b0.js"><link rel="prefetch" href="/BlogFlows/assets/js/23.e2de6496.js"><link rel="prefetch" href="/BlogFlows/assets/js/24.eba99031.js"><link rel="prefetch" href="/BlogFlows/assets/js/25.940fcbad.js"><link rel="prefetch" href="/BlogFlows/assets/js/26.396566fe.js"><link rel="prefetch" href="/BlogFlows/assets/js/27.1b426bcf.js"><link rel="prefetch" href="/BlogFlows/assets/js/28.c54b329d.js"><link rel="prefetch" href="/BlogFlows/assets/js/29.1d2b27d7.js"><link rel="prefetch" href="/BlogFlows/assets/js/3.d93bcbe1.js"><link rel="prefetch" href="/BlogFlows/assets/js/30.5163333a.js"><link rel="prefetch" href="/BlogFlows/assets/js/31.f028e790.js"><link rel="prefetch" href="/BlogFlows/assets/js/33.16d9b5f5.js"><link rel="prefetch" href="/BlogFlows/assets/js/34.73d6e4cb.js"><link rel="prefetch" href="/BlogFlows/assets/js/35.43fcd6c1.js"><link rel="prefetch" href="/BlogFlows/assets/js/36.f5632390.js"><link rel="prefetch" href="/BlogFlows/assets/js/37.546db6b1.js"><link rel="prefetch" href="/BlogFlows/assets/js/38.72d3a4b0.js"><link rel="prefetch" href="/BlogFlows/assets/js/39.4f2411ff.js"><link rel="prefetch" href="/BlogFlows/assets/js/4.605f48a5.js"><link rel="prefetch" href="/BlogFlows/assets/js/40.2806c4eb.js"><link rel="prefetch" href="/BlogFlows/assets/js/41.10456487.js"><link rel="prefetch" href="/BlogFlows/assets/js/42.7ab57285.js"><link rel="prefetch" href="/BlogFlows/assets/js/43.f9cbcf2a.js"><link rel="prefetch" href="/BlogFlows/assets/js/44.53149759.js"><link rel="prefetch" href="/BlogFlows/assets/js/45.9cfccb3b.js"><link rel="prefetch" href="/BlogFlows/assets/js/46.86ee102e.js"><link rel="prefetch" href="/BlogFlows/assets/js/47.fa53f0e1.js"><link rel="prefetch" href="/BlogFlows/assets/js/48.2b0359d9.js"><link rel="prefetch" href="/BlogFlows/assets/js/5.deeb8ef3.js"><link rel="prefetch" href="/BlogFlows/assets/js/6.01480eef.js"><link rel="prefetch" href="/BlogFlows/assets/js/7.3965e4fd.js"><link rel="prefetch" href="/BlogFlows/assets/js/8.1ce9193f.js"><link rel="prefetch" href="/BlogFlows/assets/js/9.61a50a6d.js">
    <link rel="stylesheet" href="/BlogFlows/assets/css/0.styles.481dacda.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BlogFlows/" class="home-link router-link-active"><!----> <span class="site-name">LoreFlows</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BlogFlows/core/" class="nav-link">核心</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogFlows/project/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/normalize/" class="nav-link">规范</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/packages/" class="nav-link router-link-active">类库</a></li></ul></div></div><div class="nav-item"><a href="/BlogFlows/concept/" class="nav-link">概念</a></div><div class="nav-item"><a href="/BlogFlows/tools/" class="nav-link">工具</a></div> <a href="https://github.com/yanGo1221" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BlogFlows/core/" class="nav-link">核心</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogFlows/project/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/normalize/" class="nav-link">规范</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/packages/" class="nav-link router-link-active">类库</a></li></ul></div></div><div class="nav-item"><a href="/BlogFlows/concept/" class="nav-link">概念</a></div><div class="nav-item"><a href="/BlogFlows/tools/" class="nav-link">工具</a></div> <a href="https://github.com/yanGo1221" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/BlogFlows/packages/" class="sidebar-link">Overview</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Packages</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/packages/a.cluster.html" class="sidebar-link">Cluster</a></li><li><a href="/BlogFlows/packages/b.react.html" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BlogFlows/packages/b.react.html#create-react-app" class="sidebar-link">Create React App</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/packages/b.react.html#react-router" class="sidebar-link">React Router</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/packages/b.react.html#bizcharts" class="sidebar-link">Bizcharts</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/packages/b.react.html#react-hot-loader" class="sidebar-link">React Hot Loader</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/packages/b.react.html#node-sass-安装问题" class="sidebar-link">Node-Sass 安装问题</a></li></ul></li><li><a href="/BlogFlows/packages/c.swift.html" class="sidebar-link">Swift</a></li><li><a href="/BlogFlows/packages/d.python.html" class="sidebar-link">Python3</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react"><a href="#react" aria-hidden="true" class="header-anchor">#</a> React</h1> <blockquote><p>Record React Materials In Project</p></blockquote> <h2 id="create-react-app"><a href="#create-react-app" aria-hidden="true" class="header-anchor">#</a> Create React App</h2> <p><a href="https://www.html.cn/create-react-app/docs/getting-started/" target="_blank" rel="noopener noreferrer">Create React App<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>为官方推荐脚手架，快速搭建 react 开发环境，创建单页面，简称CRA</p> <ol><li>不必过多了解构建工具，更专注于开发</li> <li>只需要引入一个依赖项，即 creat react app，它来确保顶层的部分无缝协调工作</li> <li>你可以对底层依赖自由配置</li></ol> <h3 id="install-update"><a href="#install-update" aria-hidden="true" class="header-anchor">#</a> Install &amp;&amp; Update</h3> <p>在当前路径下新建一个名为 rApp 的 react app，可以：</p> <ol><li><code>npx create-react-app rapp</code>  npx 为 npm5.2+ 附带的包运行工具</li> <li>也可以执行 <code>npm init react-app rapp</code></li></ol> <p>注意，project name 内不能含有大写字母，否则会出现 <code>Error: name can no longer containe capital letters</code></p> <p>通过 <code>npm install react-scripts@latest</code> 对 react app 进行更新</p> <p>安装成功之后，通过 <code>package.json</code> 查看运行命令，值得一提的是，<code>npm run eject</code> 添加一些高级配置，单向操作（这意味着你不能back）</p> <p>通过 <code>npm install --save xxxx</code> 来安装依赖项</p> <p>如果需要声明全局变量，最好不要在 .html 文件内直接声明，挂载到 <code>window</code> 对象上是更好的办法</p> <p>例如，通过执行 <code>npm install --save react-router-dom</code> 来添加路由解决方案，如果提示有漏洞，执行 <code>npm audit fix --force</code> 来修复漏洞</p> <h3 id="config"><a href="#config" aria-hidden="true" class="header-anchor">#</a> Config</h3> <p>React 项目 build 的路径问题</p> <ul><li>通过修改 <code>ceeate-react-app.config &gt; paths.js</code> 文件内的 <code>getServedPath()</code> 方法解决</li></ul> <p>修改启动端口</p> <ul><li>clone 项目之后，通过 <code>npm install</code> 安装依赖</li> <li>如果之前 <code>npm run eject</code> 则会将配置暴露出来，在 <code>scripts/start.js</code> 内修改端口号</li></ul> <p>为项目 scr 目录设置别名</p> <ul><li>在 config&gt;paths.js 文件内，添加 <code>appSrc: resolveApp('src'),</code>，如果已经存在，则不用添加</li> <li>在 config&gt;webpack.config.js 文件内，添加别名 <code>alias: { '@': paths.appScr }</code></li> <li>如果项目内引入了 TypeScript，在 tsconfig.json 文件内添加 <code>&quot;paths&quot;: { &quot;@/*&quot;: [&quot;src/*&quot;] }</code></li></ul> <h3 id="file-structure"><a href="#file-structure" aria-hidden="true" class="header-anchor">#</a> File Structure</h3> <p><code>public/index.html</code> 为 html 模板，<code>src/index.js</code> 为 Javascript 入口文件，以上两者文件名均不可更改，其他随意</p> <p>webpack 仅会编译 <code>src</code> 目录下的文件，其他的顶级目录不会被包含到生产环境，因此可以在 <code>Public</code> 目录下放一些静态资源</p> <h3 id="style-assets"><a href="#style-assets" aria-hidden="true" class="header-anchor">#</a> style &amp;&amp; assets</h3> <p>在 javascript 文件内直接引入 .css 文件来表明对该样式表的依赖</p> <p>通过命名规约 <code>Xxx.module.css</code> 来引入 css 模块（相当于公共样式）</p> <p>通过 <code>npm install node-sass --save</code> 来安装 Sass 编译器</p> <p>create-react-app 会自动压缩 css 并通过 Autoprefixer 来补全前缀</p> <p>类似 css，通过 <code>import</code> 在 javascript 文件中引入图片，字体等资源</p> <p>引入 public 文件夹内的资源时，需要通过 <code>%PUBLIC_URL%</code> 来指定路径</p> <h2 id="react-router"><a href="#react-router" aria-hidden="true" class="header-anchor">#</a> React Router</h2> <p><a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="noopener noreferrer">react 路由组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 通过 <code>npm install react-router-dom --save</code> 来引入</p> <p>react router 内包含三种类型组件：</p> <ol><li>路由器组件</li> <li>路由器匹配组件</li> <li>导航组件</li></ol> <p>理解：路由器匹配组件一般映射一个模块，当 url 改变时则会去匹配该模块并展示，但是所有的路由器匹配组件都必须被包裹在路由器组件内</p> <h3 id="withrouter"><a href="#withrouter" aria-hidden="true" class="header-anchor">#</a> withRouter</h3> <p>给空间绑定事件，使其能够通过 javascript 来实现跳转，通过 <code>withRouter</code> 来实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FlowHeader</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>FlowHeaderProps<span class="token punctuation">,</span> FlowHeaderState<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">// statement</span>

    <span class="token function-variable function">handleRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> selectedItem <span class="token operator">=</span> flowItems<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedItem<span class="token punctuation">.</span>label <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>currentItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>FlowHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use in redux</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="router"><a href="#router" aria-hidden="true" class="header-anchor">#</a> router</h3> <p>路由器组件，是 react router 的<strong>地基</strong>，两个关注组件 <code>&lt;BroswerRouter&gt;</code> 和 <code>&lt;HashRouter&gt;</code></p> <p>一般来说，如果有服务器交互，则应该使用 <code>&lt;BroswerRouter&gt;</code>，如果作为静态文件服务器，则使用 <code>&lt;HashRouter&gt;</code></p> <p><code>&lt;BroswerRouter&gt;</code> 利用 H5.history.api(pushState, replaceState, popState) 来实现 UI 和 URL 的同步</p> <p><code>&lt;HashRouter&gt;</code> 利用 window.location.hash 来实现 UI 和 URL 的同步</p> <h3 id="router-matching"><a href="#router-matching" aria-hidden="true" class="header-anchor">#</a> router matching</h3> <p>路由器匹配组件，两个关注组件 <code>&lt;Route&gt;</code> 和 <code>&lt;Switch&gt;</code></p> <p><code>&lt;Route&gt;</code> 通过比较组件设置的path和当前URL的路径，如果能够匹配上，则返回内容，否则返回 null；如果不设置 path 属性，则一定会匹配</p> <p><code>&lt;Switch&gt;</code> 组件通常用来包裹 <code>&lt;Route&gt;</code> list，在 <code>&lt;Switch&gt;</code> 中按照组合的先后顺序进行遍历，返回第一个匹配的 <code>&lt;Route&gt;</code>，如果一个都没匹配上，可以设置一个无path属性的 <code>&lt;Route&gt;</code> 来作为 404 页面</p> <h3 id="use-in-app"><a href="#use-in-app" aria-hidden="true" class="header-anchor">#</a> Use In App</h3> <p>在 react 项目中，对 react-router 的封装</p> <ol><li><code>RouteConfig.js</code> 用来引入相关的组件，实现对路由的配置，实现对 <code>&lt;Route&gt;</code> API 的相关属性配置</li> <li><code>Router.js</code> 用来实现路由递归逻辑，输入 config，输出 react-router 相关的组件</li> <li>在 <code>app.js</code> 内引入 <code>RouteConfig.js</code> 和 <code>Router.js</code>，并通过 <code>&lt;BrowserRouter&gt;</code> 或者其他 API 来封装启动路由</li></ol> <h2 id="bizcharts"><a href="#bizcharts" aria-hidden="true" class="header-anchor">#</a> Bizcharts</h2> <h3 id="scale"><a href="#scale" aria-hidden="true" class="header-anchor">#</a> scale</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// 针对 date 数据列</span>
    date<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 数据类型，非连续的时间类型</span>
        type<span class="token punctuation">:</span> <span class="token string">'cat'</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * range 用来控制坐标轴两边的留白
         * 对于分类数据的坐标轴两边默认会有留白
         * 连续数据的坐标轴的两端没有空白刻度
         * 留白程度通过 range 来控制
         */</span>
        range<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="react-hot-loader"><a href="#react-hot-loader" aria-hidden="true" class="header-anchor">#</a> React Hot Loader</h2> <blockquote><p>React Hot Loader is a plugin that allows React components to be live reloaded without the loss of state</p></blockquote> <p><a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="noopener noreferrer">React-hot-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个插件，允许 React 组件在不丢失状态的条件下进行实时重新加载操作</p> <p>webpack-dev-server 也实现了热加载，但是是在代码改动后，经过重新打包，进而重新刷新整个页面</p> <p>不同于 webpack-dev-server，react-hot-loader 不会刷新整个页面，它只替换修改的代码，进而做到了页面的局部刷新，其需要依赖 webpack 的 HotModuleReplacement 热加载插件</p> <h3 id="use-in-app-2"><a href="#use-in-app-2" aria-hidden="true" class="header-anchor">#</a> Use In App</h3> <ol><li><code>npm install react-hot-loader --save</code> 引入 react-hot-loader</li> <li>配置 .babelrc 文件，启用相关插件，在 create react app 且 <code>npm run eject</code> 之后，可以直接在 package.json 内进行 babel 相关配置</li></ol> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;babel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	  <span class="token string">&quot;react-app&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	  <span class="token string">&quot;react-hot-loader/babel&quot;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li>webpack 进行相关文件配置，用来保证 react-hot-loader 在引入 <code>react</code> 和 <code>react-dom</code> 之前加载</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpackDevServer.config.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">proxy<span class="token punctuation">,</span> allowedHost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js</span>
entry<span class="token punctuation">:</span> <span class="token punctuation">[</span>
	<span class="token string">'react-hot-loader/patch'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="4"><li>在项目文件内使用</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// App.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> hot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hot-loader/root'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello World<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">hot</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="node-sass-安装问题"><a href="#node-sass-安装问题" aria-hidden="true" class="header-anchor">#</a> Node-Sass 安装问题</h2> <p>clone 一个 react 项目后，在执行 <code>npm install</code> 之后，发现 node-sass 安装出现问题，原因是无法自动下载相应的文件</p> <p>解决办法：</p> <ul><li>手动下载需要引入的文件，一般在 install 时会自动下载，将下载文件放在nodejs的根目录下</li> <li>进入项目根目录，设置 sass 路径，<code>set SASS_BINARY_PATH=[file path]</code></li> <li>继续执行 <code>npm i node-sass -D -verbose</code> 即可</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/28/2019, 5:48:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/BlogFlows/packages/a.cluster.html" class="prev">
          Cluster
        </a></span> <span class="next"><a href="/BlogFlows/packages/c.swift.html">
          Swift
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BlogFlows/assets/js/app.40814e45.js" defer></script><script src="/BlogFlows/assets/js/2.f4cb1acf.js" defer></script><script src="/BlogFlows/assets/js/32.5ae5f7fc.js" defer></script>
  </body>
</html>
