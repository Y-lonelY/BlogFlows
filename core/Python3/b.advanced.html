<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Advanced | LoreFlows</title>
    <meta name="description" content="Welcome To The Knowledge Palace!">
    <link rel="icon" href="logo.ico">
    
    <link rel="preload" href="/BlogFlows/assets/css/0.styles.481dacda.css" as="style"><link rel="preload" href="/BlogFlows/assets/js/app.40814e45.js" as="script"><link rel="preload" href="/BlogFlows/assets/js/2.f4cb1acf.js" as="script"><link rel="preload" href="/BlogFlows/assets/js/25.940fcbad.js" as="script"><link rel="prefetch" href="/BlogFlows/assets/js/10.ef3b0305.js"><link rel="prefetch" href="/BlogFlows/assets/js/11.38947e9d.js"><link rel="prefetch" href="/BlogFlows/assets/js/12.8b23f1ea.js"><link rel="prefetch" href="/BlogFlows/assets/js/13.24ed00e3.js"><link rel="prefetch" href="/BlogFlows/assets/js/14.aae22bb5.js"><link rel="prefetch" href="/BlogFlows/assets/js/15.3b0cf42b.js"><link rel="prefetch" href="/BlogFlows/assets/js/16.8678c867.js"><link rel="prefetch" href="/BlogFlows/assets/js/17.bdfeb8b8.js"><link rel="prefetch" href="/BlogFlows/assets/js/18.ef671b42.js"><link rel="prefetch" href="/BlogFlows/assets/js/19.f00581ec.js"><link rel="prefetch" href="/BlogFlows/assets/js/20.2ba75e59.js"><link rel="prefetch" href="/BlogFlows/assets/js/21.66731536.js"><link rel="prefetch" href="/BlogFlows/assets/js/22.98d195b0.js"><link rel="prefetch" href="/BlogFlows/assets/js/23.e2de6496.js"><link rel="prefetch" href="/BlogFlows/assets/js/24.eba99031.js"><link rel="prefetch" href="/BlogFlows/assets/js/26.396566fe.js"><link rel="prefetch" href="/BlogFlows/assets/js/27.1b426bcf.js"><link rel="prefetch" href="/BlogFlows/assets/js/28.c54b329d.js"><link rel="prefetch" href="/BlogFlows/assets/js/29.1d2b27d7.js"><link rel="prefetch" href="/BlogFlows/assets/js/3.d93bcbe1.js"><link rel="prefetch" href="/BlogFlows/assets/js/30.5163333a.js"><link rel="prefetch" href="/BlogFlows/assets/js/31.f028e790.js"><link rel="prefetch" href="/BlogFlows/assets/js/32.5ae5f7fc.js"><link rel="prefetch" href="/BlogFlows/assets/js/33.16d9b5f5.js"><link rel="prefetch" href="/BlogFlows/assets/js/34.73d6e4cb.js"><link rel="prefetch" href="/BlogFlows/assets/js/35.43fcd6c1.js"><link rel="prefetch" href="/BlogFlows/assets/js/36.f5632390.js"><link rel="prefetch" href="/BlogFlows/assets/js/37.546db6b1.js"><link rel="prefetch" href="/BlogFlows/assets/js/38.72d3a4b0.js"><link rel="prefetch" href="/BlogFlows/assets/js/39.4f2411ff.js"><link rel="prefetch" href="/BlogFlows/assets/js/4.605f48a5.js"><link rel="prefetch" href="/BlogFlows/assets/js/40.2806c4eb.js"><link rel="prefetch" href="/BlogFlows/assets/js/41.10456487.js"><link rel="prefetch" href="/BlogFlows/assets/js/42.7ab57285.js"><link rel="prefetch" href="/BlogFlows/assets/js/43.f9cbcf2a.js"><link rel="prefetch" href="/BlogFlows/assets/js/44.53149759.js"><link rel="prefetch" href="/BlogFlows/assets/js/45.9cfccb3b.js"><link rel="prefetch" href="/BlogFlows/assets/js/46.86ee102e.js"><link rel="prefetch" href="/BlogFlows/assets/js/47.fa53f0e1.js"><link rel="prefetch" href="/BlogFlows/assets/js/48.2b0359d9.js"><link rel="prefetch" href="/BlogFlows/assets/js/5.deeb8ef3.js"><link rel="prefetch" href="/BlogFlows/assets/js/6.01480eef.js"><link rel="prefetch" href="/BlogFlows/assets/js/7.3965e4fd.js"><link rel="prefetch" href="/BlogFlows/assets/js/8.1ce9193f.js"><link rel="prefetch" href="/BlogFlows/assets/js/9.61a50a6d.js">
    <link rel="stylesheet" href="/BlogFlows/assets/css/0.styles.481dacda.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BlogFlows/" class="home-link router-link-active"><!----> <span class="site-name">LoreFlows</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BlogFlows/core/" class="nav-link router-link-active">核心</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogFlows/project/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/normalize/" class="nav-link">规范</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/packages/" class="nav-link">类库</a></li></ul></div></div><div class="nav-item"><a href="/BlogFlows/concept/" class="nav-link">概念</a></div><div class="nav-item"><a href="/BlogFlows/tools/" class="nav-link">工具</a></div> <a href="https://github.com/yanGo1221" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BlogFlows/core/" class="nav-link router-link-active">核心</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BlogFlows/project/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/normalize/" class="nav-link">规范</a></li><li class="dropdown-item"><!----> <a href="/BlogFlows/packages/" class="nav-link">类库</a></li></ul></div></div><div class="nav-item"><a href="/BlogFlows/concept/" class="nav-link">概念</a></div><div class="nav-item"><a href="/BlogFlows/tools/" class="nav-link">工具</a></div> <a href="https://github.com/yanGo1221" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/BlogFlows/core/" class="sidebar-link">Overview</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/core/JavaScript/d.javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/BlogFlows/core/JavaScript/a.esx.html" class="sidebar-link">ES6</a></li><li><a href="/BlogFlows/core/JavaScript/b.typescript.html" class="sidebar-link">TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/core/React/a.basic.html" class="sidebar-link">React</a></li><li><a href="/BlogFlows/core/React/b.advanced.html" class="sidebar-link">React Advanced</a></li><li><a href="/BlogFlows/core/React/c.hook.html" class="sidebar-link">React Hook</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/core/HTML5/a.basic.html" class="sidebar-link">HTML5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Swift4.x</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/core/Swift/a.swift.html" class="sidebar-link">Swift4.x</a></li><li><a href="/BlogFlows/core/Swift/b.component.html" class="sidebar-link">UIKit Components</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BlogFlows/core/Python3/a.basic.html" class="sidebar-link">Basic</a></li><li><a href="/BlogFlows/core/Python3/b.advanced.html" class="active sidebar-link">Advanced</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#面向对象编程" class="sidebar-link">面向对象编程</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#切片" class="sidebar-link">切片</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#迭代" class="sidebar-link">迭代</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#列表生成式" class="sidebar-link">列表生成式</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#generator" class="sidebar-link">generator</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#迭代器" class="sidebar-link">迭代器</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#枚举" class="sidebar-link">枚举</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#面向对象编程-2" class="sidebar-link">面向对象编程</a></li><li class="sidebar-sub-header"><a href="/BlogFlows/core/Python3/b.advanced.html#函数式编程" class="sidebar-link">函数式编程</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="advanced"><a href="#advanced" aria-hidden="true" class="header-anchor">#</a> Advanced</h1> <blockquote><p>Advanced Features</p></blockquote> <h2 id="面向对象编程"><a href="#面向对象编程" aria-hidden="true" class="header-anchor">#</a> 面向对象编程</h2> <p>面向对象中需要重点理解两个东西：类（class）和实例（instance）</p> <p>就比如：人是一个class，人具有年龄，爱好等属性，同时人可以制造工具或者进行其他活动，这可以视为人的属性和方法，而地球上的每一个人就是人这个类的 instance</p> <p>类是抽象的模版，实例是类的具体表现</p> <p>面向对象的<strong>核心思想</strong>是抽象出 class，再利用 class 创建出 instance</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python3</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token string">'wakatime scripts'</span>

__author__ <span class="token operator">=</span> <span class="token string">'Y-lonelY'</span>

<span class="token keyword">import</span> json
<span class="token keyword">import</span> requests

<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token comment"># 普通成员变量</span>
	url <span class="token operator">=</span> <span class="token string">'https://wakatime.com/api/v1/users/current/summaries'</span>
    cache <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token comment"># 私有成员变量</span>
    __api_key <span class="token operator">=</span> <span class="token string">'xxx'</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>start <span class="token operator">=</span> start
        self<span class="token punctuation">.</span>end <span class="token operator">=</span> end

    <span class="token keyword">def</span> <span class="token function">getData</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token keyword">try</span><span class="token punctuation">:</span>
    		<span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>start<span class="token punctuation">)</span>
    	<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    		<span class="token keyword">raise</span>
    	<span class="token keyword">else</span><span class="token punctuation">:</span>
    		<span class="token keyword">pass</span>
    	<span class="token keyword">finally</span><span class="token punctuation">:</span>
    		<span class="token keyword">pass</span>

    <span class="token comment"># 通过 classmethod 来声明静态方法，通过 cls 来取代 self</span>
    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_lang_sql</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> lang<span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">:</span>
    	<span class="token comment"># statement</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
	person <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'2019-10-10'</span><span class="token punctuation">,</span> <span class="token string">'2019-10-20'</span><span class="token punctuation">)</span>
	person<span class="token punctuation">.</span>getData<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="访问限制"><a href="#访问限制" aria-hidden="true" class="header-anchor">#</a> 访问限制</h3> <p>限制访问的目的在于不让类外部方法随意更改类的内部属性，保护内部状态</p> <p>类比私有属性的概念，关键字为 <code>__</code>，比如 <code>self.__name</code>，这样实例对象就不能访问到 <code>__name</code> 这个属性，这个属性仅在类的内部使用</p> <p>可以通过内部定义的 <code>get || set</code> 方法，将私有变量返回或者修改</p> <p>写法比较</p> <ul><li><p><code>_name</code> 这种写法，在类外部是可以访问的，但是它按照python习惯，表示“可以访问，但是不要随意改变”</p></li> <li><p><code>__name__</code> 表示特殊变量，在类外部是可以访问的</p></li></ul> <h3 id="class-instance"><a href="#class-instance" aria-hidden="true" class="header-anchor">#</a> class &amp;&amp; instance</h3> <p>python 中的类通过 <code>class</code> 关键字声明，类的完整声明 <code>class Person(object):</code> 表示 person 这个类继承至 object，<strong>注意</strong>，所有的类本质上都继承至 object</p> <p>通过 <code>__init__(self, params)</code> 来约定创建实例时，强制需要传入的参数，作用是将属性绑定到 <code>self</code> 上，<code>__self__</code> 就是实例本身，不用传入，且默认为第一个参数，可以类比 es6 的 <code>constructor()</code> 方法</p> <p>通过 <code>self</code> 是给类的生成实例绑定属性，在类里面直接声明变量就是直接给类绑定属性，如果绑定了同名的属性，python3 会优先选择实例属性，所以一般不要声明同名属性</p> <p>数据封装：因为实例在声明时就已经有了声明的数据，所以可以直接在类的内部去访问这些数据，而没必要去再在外部通过函数去访问（这意味着你需要维护实例初始化的数据，来随时作为参数传入函数）</p> <p><strong>注意</strong></p> <ol><li>class 的名字第一个字母约定为大写</li> <li>类中定义方法的第一个参数必须是 <code>self</code>，可以类比 javascript 中的 <code>this</code> 关键字，指向实例本身</li> <li>与 javascript 不同之处之一在于：python 中创建一个实例不需要使用 <code>new</code> 关键字</li></ol> <h2 id="切片"><a href="#切片" aria-hidden="true" class="header-anchor">#</a> 切片</h2> <p>切换用于取 list 或者 tuple 部分元素</p> <p>切片操作符（slice）可以用于 str(str 也可以看成一个 list), list, tuple</p> <p>截取出来的元素类型由原元素决定，这里需要注意例如 “params[-1:] 和 params[-1]” 的区别在于返回值类型不同</p> <p>可以通过 <code>[:]</code> 直接复制原list</p> <p><code>[n:m:i]</code> 这样的写法表示从原 list 的 n-m 范围内，每隔 i 取一次值</p> <h2 id="迭代"><a href="#迭代" aria-hidden="true" class="header-anchor">#</a> 迭代</h2> <p>python 中只要是可迭代的对象都可以通过 <code>for...in...</code> 来遍历，比如字符串，list，dict</p> <p>通过引入collections模块的Iterable类型判断对象是否可以迭代</p> <p>通过内置方法 <code>enumerate(list)</code> 可以把list转换成键值对的形式</p> <h2 id="列表生成式"><a href="#列表生成式" aria-hidden="true" class="header-anchor">#</a> 列表生成式</h2> <p>通过列表生成式，可以直接创建一个列表，但是由于内存限制，列表容量有限，对于仅用访问部分元素却要创建一个大数据量元素的列表，很容易会造成资源浪费</p> <p>关键表达式：<code>[表达式 for i in item 判断条件]</code> 可以读作：for i in item，根据判断条件对 i 进行筛选，然后将 i 代入表达式得到计算结果，return 出最终结果，其中 for 循环可以存在多个(相当于嵌套循环)</p> <p>列表生成式，所以其关键字为 <code>[...]</code></p> <h2 id="generator"><a href="#generator" aria-hidden="true" class="header-anchor">#</a> generator</h2> <p>生成器针对列表生成器的缺点，提出了一种更好的解决方案：generator 不必创建完整的 list，它的机制是一边循环一边计算，通过算法推算出下一个元素</p> <p>生成器的关键字为 <code>(...)</code> 或者 <code>yield</code></p> <p>通过 <code>next(generator)</code> 可以计算出生成器下一个元素值，直到计算到最后一个元素，抛出 <code>StopInteration</code> 错误，不过 <code>next()</code> 几乎不会用到</p> <p>generator 是一个迭代器，所有通过可以通过迭代方法来遍历，而不需要关心 <code>StopInteration</code> 错误</p> <p><code>yield</code> 关键字用在函数方法中，表示该函数是一个生成器</p> <p>包含 <code>yield</code> 的 generator 与函数最大的区别在于执行机制</p> <ul><li>函数会按照顺序依次执行，直到 return 或者执行到最后一行语句返回，直接返回结果</li> <li>generator 遇到 <code>yield</code> 返回，遇到 <code>next()</code> 语句继续执行，且从上次返回的 <code>yield</code> 语句出开始，返回一个 generator</li></ul> <h2 id="迭代器"><a href="#迭代器" aria-hidden="true" class="header-anchor">#</a> 迭代器</h2> <p>可迭代对象（Interable）和迭代器（Interator）:</p> <ul><li>可以直接迭代（for循环遍历）的对象就是可迭代对象</li> <li>不但可以迭代，还可以被 <code>next()</code> 函数调用的就是迭代器</li> <li>Interator 一定是 Interable，反之却不一定成立</li></ul> <p>生成器就是一个迭代器，迭代器的计算是惰性的，只有在需要时才会计算下一个数值，因此它可以用来表示一个无限大的数据流，只是不知道其长度</p> <p>通过 <code>list()</code> 来强制计算 Interator 并返回一个 list</p> <p>通过 <code>iter()</code> 来将 Interable 转换成一个 Interator</p> <p>python3 的 for 循环本质上是通过 <code>iter()</code> 函数结合 <code>next()</code> 来实现的</p> <h2 id="枚举"><a href="#枚举" aria-hidden="true" class="header-anchor">#</a> 枚举</h2> <p>枚举类是用来管理同类型不同值的常量的定义</p> <p>Python 提供 <code>Enum</code> 关键字来实现枚举类，通过枚举类型来定义一个 class 类型，这个 class 不可改变，每个常量都是这个 class 的唯一实例，实现方法很简单：</p> <div class="language-Python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum

Month <span class="token operator">=</span> Enum<span class="token punctuation">(</span><span class="token string">'Month'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Jan'</span><span class="token punctuation">,</span> <span class="token string">'Feb'</span><span class="token punctuation">,</span> <span class="token string">'Mar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 获取枚举值</span>
<span class="token keyword">for</span> name<span class="token punctuation">,</span> menber <span class="token keyword">in</span> Month<span class="token punctuation">.</span>__members__<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token comment"># statements</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>枚举类的 <code>value</code> 默认从 1 开始赋值给各个变量，如果想要自定义枚举类型的值，可以通过从 <code>Enum</code> 派生出自定义类：</p> <div class="language-Python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token punctuation">,</span> unique

<span class="token comment"># @unique 用来帮助检查是否有重复值</span>
<span class="token decorator annotation punctuation">@unique</span>
<span class="token keyword">class</span> <span class="token class-name">Week</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
	Sun <span class="token operator">=</span> <span class="token number">0</span>
	Mon <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>通过 <code>Week.Sun</code> 和 <code>Week.Sun.value</code> 来访问枚举常量和值</p> <h3 id="枚举类"><a href="#枚举类" aria-hidden="true" class="header-anchor">#</a> 枚举类</h3> <p>枚举类的作用就是将一组相关常量定义在一个 class 中</p> <p>枚举类的声明方法有两种：</p> <ol><li><p>通过 <code>Enum(classname, tuple)</code> 方法直接生成，相当于调用 <code>Enum</code> 类的 <code>__call__()</code> 定制方法，其 <code>value</code> 从 1 开始累加</p></li> <li><p>通过继承 <code>Enum</code> 类来实现枚举类，此时可以利用装饰器 <code>unique</code> 来保证没有重复值</p></li></ol> <h2 id="面向对象编程-2"><a href="#面向对象编程-2" aria-hidden="true" class="header-anchor">#</a> 面向对象编程</h2> <p>面向对象中需要重点理解两个东西：类（class）和实例（instance）</p> <p>就比如：人是一个class，人具有年龄，爱好等属性，同时人可以制造工具或者进行其他活动，这可以视为人的属性和方法，而地球上的每一个人就是人这个类的 instance</p> <p>类是抽象的模版，实例是类的具体表现</p> <p>面向对象的<strong>核心思想</strong>是抽象出 class，再利用 class 创建出 instance</p> <h3 id="面向对象和面向过程"><a href="#面向对象和面向过程" aria-hidden="true" class="header-anchor">#</a> 面向对象和面向过程</h3> <p>面向过程的程序设计是把计算机程序视为<strong>一系列的命令集合</strong>，维护的是其执行顺序</p> <p>面向对象的程序设计是把计算机程序视为<strong>一组对象的集合</strong>，维护的是消息在对象之间的传递</p> <p>面向对象的抽象程序要比函数高，因为一个class既包含数据，又包含操作数据的方法</p> <h3 id="class-instance-2"><a href="#class-instance-2" aria-hidden="true" class="header-anchor">#</a> class &amp;&amp; instance</h3> <p>python 中的类通过 <code>class</code> 关键字声明，类的完整声明 <code>class Person(object):</code> 表示 person 这个类继承至 object，<strong>注意</strong>，所有的类本质上都继承至 object</p> <p>通过 <code>__init__(self, params)</code> 来约定创建实例时，强制需要传入的参数，作用是将属性绑定到 <code>self</code> 上，<code>__self__</code> 就是实例本身，不用传入，且默认为第一个参数，可以类比 es6 的 <code>constructor()</code> 方法</p> <p>通过 <code>self</code> 是给类的生成实例绑定属性，在类里面直接声明变量就是直接给类绑定属性，如果绑定了同名的属性，python3 会优先选择实例属性，所以一般不要声明同名属性</p> <p>数据封装：因为实例在声明时就已经有了声明的数据，所以可以直接在类的内部去访问这些数据，而没必要去再在外部通过函数去访问（这意味着你需要维护实例初始化的数据，来随时作为参数传入函数）</p> <p><strong>注意</strong></p> <ol><li>class 的名字第一个字母约定为大写</li> <li>类中定义方法的第一个参数必须是 <code>self</code>，可以类比 javascript 中的 <code>this</code> 关键字，指向实例本身</li> <li>与 javascript 不同之处之一在于：python 中创建一个实例不需要使用 <code>new</code> 关键字</li></ol> <h3 id="访问限制-2"><a href="#访问限制-2" aria-hidden="true" class="header-anchor">#</a> 访问限制</h3> <p>限制访问的目的在于不让类外部方法随意更改类的内部属性，保护内部状态</p> <p>类比私有属性的概念，关键字为 <code>__</code>，比如 <code>self.__name</code>，这样实例对象就不能访问到 <code>__name</code> 这个属性，这个属性仅在类的内部使用</p> <p>可以通过内部定义的 <code>get || set</code> 方法，将私有变量返回或者修改</p> <p>写法比较</p> <ul><li><p><code>_name</code> 这种写法，在类外部是可以访问的，但是它按照python习惯，表示“可以访问，但是不要随意改变”</p></li> <li><p><code>__name__</code> 表示特殊变量，在类外部是可以访问的</p></li></ul> <h3 id="继承和多态"><a href="#继承和多态" aria-hidden="true" class="header-anchor">#</a> 继承和多态</h3> <p>在面向对象中，一个类可以直接从另一个类中继承，形成子类与父类（或者说超类）的关系，子类会继承父类的所有属性和方法</p> <p>子类可以重写父类方法，python 会优先执行子类方法</p> <p><strong>在 python 中创建一个类，实际上就是创建了一个数据结构</strong>，可以通过 <code>isinstance(instance, class)</code> 来判断</p> <p>多态：因为类实际上定义了一种数据类型，所以我们可以在函数中将 instance 作为参数传入，从而可以直接调用父类的方法，而不必关心子类如何定义</p> <p>“开闭原则”：</p> <ul><li>对扩展开放：允许新增子类</li> <li>对修改封闭：不需要修改依赖父类实现的方法，子类即可调用</li></ul> <p>作为动态语言 python 的特别之处，<strong>鸭子类型</strong>：</p> <ul><li>在静态语言中，规定传参为 class，则必须为 class 或者其子类，否则报错</li> <li>对于动态语言，只需要你传入的对象内也定义了某个方法，则可以执行完整的方法。即“看起来像鸭子，走起路来像鸭子，则它就是鸭子”</li></ul> <h3 id="property"><a href="#property" aria-hidden="true" class="header-anchor">#</a> @property</h3> <p><code>@property</code> 可以理解为类的“装饰器”，它用于将一个<strong>方法变成属性</strong>调用，这样做的目的是避免通过 <code>__init__()</code> 方法定义的属性直接暴露出去，从而被任意修改，保证对参数进行必要的检查</p> <p><code>@property</code> 通过对变量进行赋值操作，完成对方法的传参操作</p> <h3 id="多重继承"><a href="#多重继承" aria-hidden="true" class="header-anchor">#</a> 多重继承</h3> <p>在设计类的继承关系时，一般都是主线单一继承，但是如果需要混入额外的类的功能时，则需要用到多重继承，关键字是 <code>MixIn</code></p> <p>MixIn 的目的就是给一个类增加多个功能，这样可以避免设计出多层次的复杂继承关系，有效减少代码的复杂性和冗余</p> <p>一般在以 <code>classnameMixIn</code> 的形式来定义 MixIn 类</p> <h3 id="定制类"><a href="#定制类" aria-hidden="true" class="header-anchor">#</a> 定制类</h3> <p>python3 中通过定义形如 <code>__xxx__</code> 的方法来表示一组在 class 中有特殊用途的函数，用来帮我们定制类</p> <p>实际表现就是，python3 定义了一批函数名，然后用户为其添加具体方法，最终在实例以某种形式就可以调用其函数方法，目的是为了让实例调用方法更加简单</p> <p>如果没有定义这些特殊方法，python3 就会按照之前定义的执行</p> <ol><li><p><code>__str__()</code> 在用户在调用 <code>print(Instance)</code> 时执行此</p></li> <li><p><code>__repr__()</code> 在直接打印 Instance 时调用，区别于 <code>__str__()</code> 它是为调试服务</p></li> <li><p><code>__iter__()</code> 方法返回一个迭代对象，使 Instance 能够作为迭代对象被 <code>for...in</code> 循环，同时还需要定义一个 <code>__next__()</code> 方法，使每次迭代时都调用此方法来返回下一个值，直到遇到 <code>StopInteration</code> 错误时退出循环</p></li> <li><p><code>__getattr__()</code> 方法用于实例调用属性或者方法时，如果原先没声明而直接使用就会调用该方法，利用 <code>__getattr__()</code> 结合返回函数可以生成<strong>链式方法</strong></p></li> <li><p><code>__call__()</code> 用来直接调用实例，就像调用函数一样，本质上函数和类是同类，可以通过 <code>callable()</code> 方法来判断函数还是实例，因为如果一个对象能够被调用，那么它就是一个 <strong>Callable对象</strong></p></li></ol> <h2 id="函数式编程"><a href="#函数式编程" aria-hidden="true" class="header-anchor">#</a> 函数式编程</h2> <p>一个命名函数可以理解为：函数名为一个指向函数方法的变量</p> <p>函数式编程就是指高度抽象的编程范式</p> <h3 id="高阶函数"><a href="#高阶函数" aria-hidden="true" class="header-anchor">#</a> 高阶函数</h3> <p>一个函数（A）可以接受另一个函数（B）作为传参，则该函数（A）为高阶函数，有点像 JavaScript 中的回调函数</p> <p>类似 JavaScript，python 内建的 <code>map()</code>, <code>reduce()</code>, <code>filter()</code> 就是典型的高阶函数，不过需要注意，其返回值是迭代器，所以一般通过 <code>list(Interator)</code> 将其转换为 list</p> <p>高阶函数不仅可以接受一个函数作为参数，同时可以将函数作为返回值返回，所以高阶函数可以理解为<strong>接受函数作为传参或者返回值的一类函数</strong></p> <p>匿名函数关键字为 <code>lambda</code></p> <p>匿名函数有个限制，就是只能有一个表达式，不要写 <code>return</code>，返回值就是该表达式的结果</p> <h3 id="装饰器"><a href="#装饰器" aria-hidden="true" class="header-anchor">#</a> 装饰器</h3> <p>举个例子：让一双 yeezy 具有防水功能，一个思路是添加各种科技，这可能会使 yeezy 变得不再轻便和耐看，更聪明的办法是套上一层鞋套。此时，yeezy 还是 yeezy，这层鞋套就相当于装饰器，在不改变 yeezy 的情况下，为其添加了防水功能</p> <p>装饰器可以理解为函数增强的实现，它在不改变原函数的情况下，为其增加功能，不同于java纯面向对象的编程，python 装饰器是基于返回函数实现的，本质上，python 装饰器的返回值也是一个函数对象</p> <blockquote><p>“在面向对象（OOP）的设计模式中，decorator 被称为装饰模式。OOP 的装饰模式需要继承和组合来实现，但是 python3 除了支持 OOP 的装饰器外，还可以直接从语法上支持（即函数编程）装饰模式”</p></blockquote> <p>decorator 的关键字为 <code>@xxx</code>，<code>@</code> 是 python3 的语法糖，实际作用就是将函数的引用重新赋值</p> <p><code>wrapper(**args, **kw)</code> 是装饰器函数的标准写法，目的是为了 <code>wrapper()</code> 函数能够接受任何参数的调用</p> <p>为了防止依赖函数签名的代码执行出现错误，通常通过 <code>@functools.wraps(func)</code> 来将原始属性写入新的函数中</p> <p><code>functools.partial()</code> 偏函数，起作用就是更改一个函数的原始默认值，同时返回一个新的函数</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/23/2019, 6:41:27 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/BlogFlows/core/Python3/a.basic.html" class="prev">
          Basic
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BlogFlows/assets/js/app.40814e45.js" defer></script><script src="/BlogFlows/assets/js/2.f4cb1acf.js" defer></script><script src="/BlogFlows/assets/js/25.940fcbad.js" defer></script>
  </body>
</html>
